- 响应系统的作用与实现
  副作用函数： 会产生副作用的函数。

  - 实现了响应式数据之后，需要进行的操作
    当读取操作发生时，将副作用函数收集。
    当设置操作发生时，将收集的副作用函数取出来并执行。
  - 设置一个全局变量 `activeEffect` 存储被注册的副作用函数
    主要用于在 `track` 存储操作时，判断是否有副作用函数。避免匿名副作用函数的问题。
    通过这样做，响应式系统就不需要依赖副作用函数的名字了。
  - 读取不存在的属性时，不应该触发副作用函数
    需要在副作用函数与被操作的目标字段之间建立起明确的联系。
    如果没有明确的联系，在读取属性的时候，无论读取的是哪一个属性，都会把副作用函数收集到🪣中。设置属性时，无论设置的是哪一个属性，都会把🪣中的副作用函数取出并执行。

    - 那应该如何设计🪣存储副作用函数，建立关联关系

      - 其实我们需要观察副作用函数的三个必要对象 1. 被操作（读取）的代理对象 2. 被操作（读取）的具体字段 3. 副作用函数effectFn
      - 使用`target`来代表一个代理对象所代理的原始对象
      - 使用 `key` 来表示被操作的字段名称
      - 用 `effectFn` 来表示被注册的副作用函数
      - 建立关系 target -> key --> effectFn

    - 新的🪣
      - 之前是`Set` 换成 `WeakMap`， 为什么是`WeakMap`。`WeakMap`的key值是弱引用，不影响垃圾回收器的工作。一旦执行完毕，垃圾回收器就会执行回收内存操作。一旦被回收，那么对应的键值对就访问不到了。
      - `WeakMap`的键是原始对象`target`
      - `WeakMap`的值是一个`Map`对象, `Map`的键是原始对象`target`的 `key`
      - `Map`对象的值是一个由副作用函数组成的`Set`，`Set`称为key的依赖集合
    - 分支切换与cleanUp

- 计算属性computed和lazy
  - 懒执行的effect

即lazy的effect
